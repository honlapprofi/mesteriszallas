jQuery(document).ready(function($){$("a.neg-cap").attr("title",cmeAdmin.negationCaption),$("a.neg-type-caps").attr("title",cmeAdmin.typeCapsNegationCaption),$("td.cap-unreg").attr("title",cmeAdmin.typeCapUnregistered),$("a.normal-cap").attr("title",cmeAdmin.switchableCaption),$("span.cap-x").attr("title",cmeAdmin.capNegated),$('table.cme-checklist input[class!="cme-check-all"]').not(":disabled").attr("title",cmeAdmin.chkCaption),$("table.cme-checklist a.neg-cap").click(function(b){$(this).closest("td").removeClass("cap-yes").removeClass("cap-no").addClass("cap-neg");var a=$(this).parent().find('input[type="checkbox"]').attr("name");return $(this).after('<input type="hidden" class="cme-negation-input" name="'+a+'" value="" />'),$('input[name="'+a+'"]').closest("td").removeClass("cap-yes").removeClass("cap-no").addClass("cap-neg"),$(this).closest("tr").hasClass("unfiltered_upload")&&($('input[name="caps[upload_files]"]').closest("td").addClass("cap-neg"),$('input[name="caps[upload_files]"]').closest("td").append('<input type="hidden" class="cme-negation-input" name="caps[upload_files]" value="" />'),$('input[name="caps[upload_files]"]').parent().next("a.neg-cap:visible").click()),!1}),$(document).on("click","table.cme-typecaps span.cap-x,table.cme-checklist span.cap-x,table.cme-checklist td.cap-neg span",function(b){$(this).closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$(this).parent().find('input[type="checkbox"]').prop("checked",!1),$(this).parent().find("input.cme-negation-input").remove();var a=$(this).next('input[type="checkbox"]').attr("name");return a||(a=$(this).next("label").find('input[type="checkbox"]').attr("name")),$('input[name="'+a+'"]').parent().closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$('input[name="'+a+'"]').prop("checked",!1).parent().find("input.cme-negation-input").remove(),$(this).closest("td").hasClass("capability-checkbox-rotate")&&($(this).closest("td").find('input[type="checkbox"]').prop("checked",!0),$(this).closest("td").hasClass("upload_files")&&($("tr.unfiltered_upload").find("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$("tr.unfiltered_upload").find('input[type="checkbox"]').prop("checked",!1),$("tr.unfiltered_upload").find("input.cme-negation-input").remove(),$('input[name="caps[unfiltered_upload]"]').parent().closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$('input[name="caps[unfiltered_upload]"]').prop("checked",!0).parent().find("input.cme-negation-input").remove())),$(this).closest("tr").hasClass("unfiltered_upload")&&($('input[name="caps[upload_files]"]').parent().closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$('input[name="caps[upload_files]"]').prop("checked",!1).parent().find("input.cme-negation-input").remove()),!1}),$("#publishpress_caps_form").bind("keypress",function(a){if(13==a.keyCode)return $(document.activeElement).parent().find('input[type="submit"]').first().click(),!1}),$("input.cme-check-all").click(function(a){$(this).closest("table").find('input[type="checkbox"][disabled!="disabled"]:visible').prop("checked",$(this).is(":checked"))}),$("a.cme-neg-all").click(function(a){return $(this).closest("table").find("a.neg-cap:visible").click(),!1}),$("a.cme-switch-all").click(function(a){return $(this).closest("table").find("td.cap-neg span").click(),!1}),$("table.cme-typecaps a.neg-type-caps").click(function(a){return $(this).closest("tr").find('td[class!="cap-neg"]').filter('td[class!="cap-unreg"]').each(function(){$(this).addClass("cap-neg");var a=$(this).find('input[type="checkbox"]').attr("name");$(this).append('<input type="hidden" class="cme-negation-input" name="'+a+'" value="" />'),$('input[name="'+a+'"]').parent().next("a.neg-cap:visible").click()}),!1}),$("table.cme-typecaps th").click(function(){var b=$(this).index(),c=!$(this).prop("checked_all");if($(this).hasClass("term-cap"))var a='[class*="term-cap"]';else var a='[class*="post-cap"]';var d=$(this).closest("table").find("tr td"+a+":nth-child("+(b+1)+') input[type="checkbox"]:visible');$(d).each(function(a,b){$('input[name="'+$(this).attr("name")+'"]').prop("checked",c)}),$(this).prop("checked_all",c)}),$("a.cme-fix-read-cap").click(function(){return $('input[name="caps[read]"]').prop("checked",!0),$('input[name="SaveRole"]').trigger("click"),!1}),$(".ppc-filter-select").each(function(){var b=$(this),a=new Array;$(this).parent().siblings("table").find("tbody").find("tr").each(function(){a.push({value:$(this).attr("class"),text:$(this).find(".cap_type").text()})}),a.forEach(function(a,c){b.append($("<option>",{value:a.value,text:a.text}))})}),$(".ppc-filter-select").prop("selectedIndex",0),$(".ppc-filter-select-reset").click(function(){$(this).prev(".ppc-filter-select").prop("selectedIndex",0),$(this).parent().siblings("table").find("tr").show()}),$(".ppc-filter-select").change(function(){$(this).val()?($(this).parent().siblings("table").find("tr").hide(),$(this).parent().siblings("table").find("thead tr:first-child").show(),$(this).parent().siblings("table").find("tr."+$(this).val()).show()):$(this).parent().siblings("table").find("tr").show()}),$(".ppc-filter-text").val(""),$(".ppc-filter-text-reset").click(function(){$(this).prev(".ppc-filter-text").val(""),$(this).parent().siblings("table").find("tr").show(),$(this).parent().siblings(".ppc-filter-no-results").hide()}),$(".ppc-filter-text").keyup(function(){var a=$(this).val().trim().replace(/\s+/g,"_");$(this).parent().siblings("table").find("tr").hide(),$(this).parent().siblings("table").find('tr[class*="'+a+'"]').show(),$(this).parent().siblings("table").find("tr.cme-bulk-select").hide(),0===$(this).val().length&&$(this).parent().siblings("table").find("tr").show(),0===$(this).parent().siblings("table").find("tr:visible").length?$(this).parent().siblings(".ppc-filter-no-results").show():$(this).parent().siblings(".ppc-filter-no-results").hide()}),$(document).on("click",".ppc-roles-tab li",function(a){a.preventDefault();var b=$(this).attr("data-tab");$(".ppc-roles-tab li").removeClass("active"),$(this).addClass("active"),$(".pp-roles-tab-tr").hide(),$(".pp-roles-"+b+"-tab").show()}),$(document).on("click",".roles-capabilities-load-more",function(a){a.preventDefault(),$(".roles-capabilities-load-more").hide(),$(".roles-capabilities-load-less").show(),$("ul.pp-roles-capabilities li").show()}),$(document).on("change",'.capability-checkbox-rotate input[type="checkbox"]',function(g){let a=$(this),e=!1,b=!1,c=!1;if(a.prop("checked")?a.prop("checked")&&(b=!0):c=!0,b&&a.hasClass("interacted")&&(b=!1,c=!1,e=!0),c)a.prop("checked",!1),a.closest("td").hasClass("upload_files")&&$("tr.unfiltered_upload").find('input[name="caps[unfiltered_upload]"]').prop("checked",!1);else if(b)a.prop("checked",!0),a.closest("td").hasClass("upload_files")&&($("tr.unfiltered_upload").find("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$("tr.unfiltered_upload").find('input[type="checkbox"]').prop("checked",!1),$("tr.unfiltered_upload").find("input.cme-negation-input").remove(),$('input[name="caps[unfiltered_upload]"]').parent().closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$('input[name="caps[unfiltered_upload]"]').prop("checked",!0).parent().find("input.cme-negation-input").remove(),$("tr.unfiltered_upload").find('input[name="caps[unfiltered_upload]"]').prop("checked",!0));else if(e){a.closest("td").hasClass("upload_files")&&$("tr.unfiltered_upload").find("a.neg-cap").trigger("click"),a.prop("checked",!1);var d=a.closest("td");d.addClass("cap-neg");var f=d.find('input[type="checkbox"]').attr("name");d.append('<input type="hidden" class="cme-negation-input" name="'+f+'" value="" />'),$('input[name="'+f+'"]').parent().next("a.neg-cap:visible").click()}a.addClass("interacted")}),$(document).on("click",".pp-row-action-rotate",function(d){d.preventDefault();let c=$(this);var a=!1,b=!1,e=0,f=0;c.closest("tr").find('input[type="checkbox"]').each(function(){$(this).hasClass("excluded-input")||$(this).prop("checked")?!$(this).hasClass("excluded-input")&&$(this).prop("checked")&&(e++,a=!0):(e++,b=!0),$(this).closest("td").hasClass("cap-neg")&&f++}),a&&b||f>=e?(a=!0,b=!1):a||!b||c.hasClass("interacted")?a&&!b?(a=!1,b=!0):(a=!1,b=!1):(a=!0,b=!1),a?c.closest("tr").find("td").filter('td[class!="cap-unreg"]').each(function(){$(this).closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$(this).parent().find('input[type="checkbox"]').prop("checked",!0),$(this).parent().find("input.cme-negation-input").remove();var a=$(this).next('input[type="checkbox"]').attr("name");a||(a=$(this).next("label").find('input[type="checkbox"]').attr("name")),$('input[name="'+a+'"]').parent().closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$('input[name="'+a+'"]').prop("checked",!0).parent().find("input.cme-negation-input").remove(),$(this).closest("td").hasClass("upload_files")&&($("tr.unfiltered_upload").find("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$("tr.unfiltered_upload").find('input[type="checkbox"]').prop("checked",!1),$("tr.unfiltered_upload").find("input.cme-negation-input").remove(),$('input[name="caps[unfiltered_upload]"]').parent().closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$('input[name="caps[unfiltered_upload]"]').prop("checked",!0).parent().find("input.cme-negation-input").remove(),$("tr.unfiltered_upload").find('input[name="caps[unfiltered_upload]"]').prop("checked",!0))}):b?c.closest("tr").find("td").filter('td[class!="cap-unreg"]').each(function(){$(this).closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$(this).parent().find('input[type="checkbox"]').prop("checked",!1),$(this).parent().find("input.cme-negation-input").remove();var a=$(this).next('input[type="checkbox"]').attr("name");a||(a=$(this).next("label").find('input[type="checkbox"]').attr("name")),$('input[name="'+a+'"]').parent().closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$('input[name="'+a+'"]').prop("checked",!1).parent().find("input.cme-negation-input").remove(),$(this).closest("td").hasClass("upload_files")&&$("tr.unfiltered_upload").find('input[name="caps[unfiltered_upload]"]').prop("checked",!1)}):c.closest("tr").find('td[class!="cap-neg"]').filter('td[class!="cap-unreg"]').each(function(){$(this).addClass("cap-neg");var a=$(this).find('input[type="checkbox"]').attr("name");$(this).append('<input type="hidden" class="cme-negation-input" name="'+a+'" value="" />'),$('input[name="'+a+'"]').parent().next("a.neg-cap:visible").click(),$(this).closest("td").hasClass("upload_files")&&$("tr.unfiltered_upload").find("a.neg-cap").trigger("click")}),c.addClass("interacted")}),$(document).on("change",'tr.unfiltered_upload input[name="caps[unfiltered_upload]"]',function(b){let a=$(this);a.prop("checked")?($('input[name="caps[upload_files]"]').parent().closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$('input[name="caps[upload_files]"]').prop("checked",!0).parent().find("input.cme-negation-input").remove()):a.prop("checked")||($('input[name="caps[upload_files]"]').parent().closest("td").removeClass("cap-neg").removeClass("cap-yes").addClass("cap-no"),$('input[name="caps[upload_files]"]').prop("checked",!1).parent().find("input.cme-negation-input").remove())})})